@function round-to-step($number, $step) {
	// Always round up

	@return ceil($number / $step) * $step;
}

@function get-closest-line-height($fontSize, $lineHeight, $baseline) {
	$roundedLineHeight: round-to-step($fontSize * $lineHeight, $baseline);

	@return $roundedLineHeight;
}

// $scale1 = small
// $scale2 = medium
// $scale3 = large
// $scale4 = xlarge
// $scale5 = xxlarge
// $scale6 = xxxlarge
// $scale1: 1.2;
// $scale2: 1.25;
// $scale3: 1.25;
// $scale4: 1.25;
// $scale5: 1.25;
// $scale6: 1.25;
// $ms-ratio: 1.25;
// $base1: 15px;
// $base2: 16px;
// $base3: 16px;
// $base4: 16px;
// $base5: 16px;
// $base6: 16px;
$scale1: 1.2;
$scale2: 1.2;
$scale3: 1.25;
$scale4: 1.25;
$scale5: 1.3;
$scale6: 1.3;
$ms-ratio: 1.25;
$base1: 14px;
$base2: 14px;
$base3: 15px;
$base4: 15px;
$base5: 16px;
$base6: 16px;

$bestFitLineHeight: false;

@mixin new-typesetter($modPosition, $lh: $lineHeight) {
	font-size: ms($modPosition, $base1, $scale1);
	font-weight: $headerWeight;
	// color: green;

	@if $bestFitLineHeight == true {
		line-height: get-closest-line-height(ms($modPosition, $base1, $scale1), clear-units($lh), 12);
	}
	@else {
		line-height: $lh;
	}

	@media only screen and (min-width: 601px) {
		font-size: ms($modPosition, $base2, $scale2);

		@if $bestFitLineHeight == true {
			line-height: get-closest-line-height(ms($modPosition, $base2, $scale2), clear-units($lh), 12);
		}
		@else {
			line-height: $lh;
		}
	}

	@media only screen and (min-width: 901px) {
		font-size: ms($modPosition, $base3, $scale3);

		@if $bestFitLineHeight == true {
			line-height: get-closest-line-height(ms($modPosition, $base3, $scale3), clear-units($lh), 12);
		}
		@else {
			line-height: $lh;
		}
	}

	@media only screen and (min-width: 1201px) {
		font-size: ms($modPosition, $base4, $scale4);

		@if $bestFitLineHeight == true {
			line-height: get-closest-line-height(ms($modPosition, $base4, $scale4), clear-units($lh), 12);
		}
		@else {
			line-height: $lh;
		}
	}

	@media only screen and (min-width: 1501px) {
		font-size: ms($modPosition, $base5, $scale5);

		@if $bestFitLineHeight == true {
			line-height: get-closest-line-height(ms($modPosition, $base5, $scale5), clear-units($lh), 12);
		}
		@else {
			line-height: $lh;
		}
	}

	@media only screen and (min-width: 1801px) {
		font-size: ms($modPosition, $base6, $scale6);

		@if $bestFitLineHeight == true {
			line-height: get-closest-line-height(ms($modPosition, $base6, $scale6), clear-units($lh), 12);
		}
		@else {
			line-height: $lh;
		}
	}
}

@mixin type--lead {
	@include new-typesetter(2, 1.5em);
}

@mixin type--1 {
	@include new-typesetter(1);
}

@mixin type {
	max-width: 16em;
	font-family: $headerFont;
	font-weight: $headerWeight;
	color: $headerColor;

	.u--text-center & {
		margin-right: auto;
		margin-left: auto;
		width: 100%; // Fixes IE11 issue
	}
}


@mixin type--h1 {
	@include type;
	@include new-typesetter(7, 1.2em);

	font-family: $fancyFont;
}

@mixin type--h2 {
	@include type;
	@include new-typesetter(6, 1.1em);

	font-family: $fancyFont;
}

@mixin type--h3 {
	@include type;
	@include new-typesetter(5, 1.1em);
}

@mixin type--h4 {
	@include type;
	@include new-typesetter(4, 1.1em);
}

@mixin type--h5 {
	@include type;
	@include new-typesetter(3, 1.3em);

	font-family: $subHeaderFont;
}

@mixin type--h6 {
	@include type;
	@include new-typesetter(2, 1.3em);

	font-family: $subHeaderFont;
}

@mixin type--lead {
	@include type;
	@include type--lead;
}

@mixin type--large {
	@include type;
	@include type--1;
}

@mixin type--p {
	@include type;
	@include new-typesetter(0);
}

@mixin type--small {
	@include type;
	@include new-typesetter(-1);
}

@mixin type--tiny {
	@include type;
	@include new-typesetter(-2);

	text-transform: uppercase;
}
